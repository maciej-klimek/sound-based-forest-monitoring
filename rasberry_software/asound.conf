# Define the hardware device for the Google Voice HAT mic
pcm.mic_hw {
    type hw
    card 1         # <--- CHANGE THIS: Your Google Voice HAT card number
    device 0       # Usually 0 for this device
    channels 2     # Google Voice HAT mic is stereo
    format S32_LE  # Common format; can use S32_LE if your mic supports it better
    rate 48000     # Common sample rate for AIY HAT mic
}

# Define the software volume control layer
pcm.mic_sv {
    type softvol
    slave {
        pcm "mic_hw"
    }
    control {
        name "Mic Capture Volume"
        card 1 # <--- USE THE SAME CARD NUMBER AS ABOVE
    }
    min_dB -3.0   # Minimum dB gain
    max_dB 20.0   # Maximum dB gain - You can go higher if needed
    resolution 256
}
# Make this new software volume device the default for capture
pcm.!default {
    type asym
    playback.pcm "default"  # Keep default playback (e.g., HDMI)
    capture.pcm "mic_sv"    # Use our softvol device for capture
}
